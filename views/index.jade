extends layout

block payload_view 
  div.text-left
    h3.accent-text.toggle-hidden Payload
    pre#payload= JSON.stringify(payload, null, 2) 

block token_view 
  div.text-left
    h3.accent-text.toggle-hidden Token
    p#token= token

block content
  div.col-12.mb-3
    ul.list-group.list-group-horizontal
      li.list-group-item.list-group-item-primary 
        strong#clock Loading ...
      li.list-group-item.list-group-item-primary
        strong IssuedAt: 
        span#iat #{payload.iat}
      li.list-group-item.list-group-item-primary
        strong Expires: 
        span#exp #{payload.exp}
      li.list-group-item.list-group-item-primary
        strong Time Remaining: 
        - var time_remaining = (exp - iat) / 60 
        span#time_remaining #{time_remaining} minutes

    div.row.section-block
      div.card.bg-dark.col-12.pb-3
        div.card-header.text-white.d-flex.justify-content-between 
          div
            if fa_script 
              i.fas.fas.fa-server.mr-2
            span Available Routes
          
        div.card-body.bg-dark
          table.table.table-striped.table-dark
            thead 
              tr 
                th.text-left Path
                th Method 
                th.text-left Description
            tbody
              tr
                td.text-left /login
                td POST
                td.text-left Send valid email and password in request body and creates new token. 
              tr
                td.text-left /logout
                td DELETE
                td.text-left Destroys your session and removes token and payload from local storage.
              tr
                td.text-left 
                  a(href="/api/token", target="_blank") /api/token
                td GET
                td.text-left *Current JSON Web Token.
              tr
                td.text-left
                  a(href="/api/payload", target="_blank") /api/payload
                td GET
                td.text-left *Payload from decodedToken.
            tfoot 
              tr 
                td.text-left(colspan="3") *Secured route
  
  div.col-12 
    if payload 
      block payload_view
    
    if token
      block token_view

